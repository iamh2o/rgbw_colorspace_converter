<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1" />
<meta name="generator" content="pdoc 0.9.2" />
<title>pyramidtriangles.grid.pyramid API documentation</title>
<meta name="description" content="Pyramid represents the whole pyramid …" />
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/11.0.1/sanitize.min.css" integrity="sha256-PK9q560IAAa6WVRRh76LtCaI8pjTJ2z11v0miyNNjrs=" crossorigin>
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/11.0.1/typography.min.css" integrity="sha256-7l/o7C8jubJiy74VsKTidCy1yBkRtiUGbVkYBylBqUg=" crossorigin>
<link rel="stylesheet preload" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/styles/github.min.css" crossorigin>
<style>:root{--highlight-color:#fe9}.flex{display:flex !important}body{line-height:1.5em}#content{padding:20px}#sidebar{padding:30px;overflow:hidden}#sidebar > *:last-child{margin-bottom:2cm}.http-server-breadcrumbs{font-size:130%;margin:0 0 15px 0}#footer{font-size:.75em;padding:5px 30px;border-top:1px solid #ddd;text-align:right}#footer p{margin:0 0 0 1em;display:inline-block}#footer p:last-child{margin-right:30px}h1,h2,h3,h4,h5{font-weight:300}h1{font-size:2.5em;line-height:1.1em}h2{font-size:1.75em;margin:1em 0 .50em 0}h3{font-size:1.4em;margin:25px 0 10px 0}h4{margin:0;font-size:105%}h1:target,h2:target,h3:target,h4:target,h5:target,h6:target{background:var(--highlight-color);padding:.2em 0}a{color:#058;text-decoration:none;transition:color .3s ease-in-out}a:hover{color:#e82}.title code{font-weight:bold}h2[id^="header-"]{margin-top:2em}.ident{color:#900}pre code{background:#f8f8f8;font-size:.8em;line-height:1.4em}code{background:#f2f2f1;padding:1px 4px;overflow-wrap:break-word}h1 code{background:transparent}pre{background:#f8f8f8;border:0;border-top:1px solid #ccc;border-bottom:1px solid #ccc;margin:1em 0;padding:1ex}#http-server-module-list{display:flex;flex-flow:column}#http-server-module-list div{display:flex}#http-server-module-list dt{min-width:10%}#http-server-module-list p{margin-top:0}.toc ul,#index{list-style-type:none;margin:0;padding:0}#index code{background:transparent}#index h3{border-bottom:1px solid #ddd}#index ul{padding:0}#index h4{margin-top:.6em;font-weight:bold}@media (min-width:200ex){#index .two-column{column-count:2}}@media (min-width:300ex){#index .two-column{column-count:3}}dl{margin-bottom:2em}dl dl:last-child{margin-bottom:4em}dd{margin:0 0 1em 3em}#header-classes + dl > dd{margin-bottom:3em}dd dd{margin-left:2em}dd p{margin:10px 0}.name{background:#eee;font-weight:bold;font-size:.85em;padding:5px 10px;display:inline-block;min-width:40%}.name:hover{background:#e0e0e0}dt:target .name{background:var(--highlight-color)}.name > span:first-child{white-space:nowrap}.name.class > span:nth-child(2){margin-left:.4em}.inherited{color:#999;border-left:5px solid #eee;padding-left:1em}.inheritance em{font-style:normal;font-weight:bold}.desc h2{font-weight:400;font-size:1.25em}.desc h3{font-size:1em}.desc dt code{background:inherit}.source summary,.git-link-div{color:#666;text-align:right;font-weight:400;font-size:.8em;text-transform:uppercase}.source summary > *{white-space:nowrap;cursor:pointer}.git-link{color:inherit;margin-left:1em}.source pre{max-height:500px;overflow:auto;margin:0}.source pre code{font-size:12px;overflow:visible}.hlist{list-style:none}.hlist li{display:inline}.hlist li:after{content:',\2002'}.hlist li:last-child:after{content:none}.hlist .hlist{display:inline;padding-left:1em}img{max-width:100%}td{padding:0 .5em}.admonition{padding:.1em .5em;margin-bottom:1em}.admonition-title{font-weight:bold}.admonition.note,.admonition.info,.admonition.important{background:#aef}.admonition.todo,.admonition.versionadded,.admonition.tip,.admonition.hint{background:#dfd}.admonition.warning,.admonition.versionchanged,.admonition.deprecated{background:#fd4}.admonition.error,.admonition.danger,.admonition.caution{background:lightpink}</style>
<style media="screen and (min-width: 700px)">@media screen and (min-width:700px){#sidebar{width:30%;height:100vh;overflow:auto;position:sticky;top:0}#content{width:70%;max-width:100ch;padding:3em 4em;border-left:1px solid #ddd}pre code{font-size:1em}.item .name{font-size:1em}main{display:flex;flex-direction:row-reverse;justify-content:flex-end}.toc ul ul,#index ul{padding-left:1.5em}.toc > ul > li{margin-top:.5em}}</style>
<style media="print">@media print{#sidebar h1{page-break-before:always}.source{display:none}}@media print{*{background:transparent !important;color:#000 !important;box-shadow:none !important;text-shadow:none !important}a[href]:after{content:" (" attr(href) ")";font-size:90%}a[href][title]:after{content:none}abbr[title]:after{content:" (" attr(title) ")"}.ir a:after,a[href^="javascript:"]:after,a[href^="#"]:after{content:""}pre,blockquote{border:1px solid #999;page-break-inside:avoid}thead{display:table-header-group}tr,img{page-break-inside:avoid}img{max-width:100% !important}@page{margin:0.5cm}p,h2,h3{orphans:3;widows:3}h1,h2,h3,h4,h5,h6{page-break-after:avoid}}</style>
<script defer src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/highlight.min.js" integrity="sha256-Uv3H6lx7dJmRfRvH8TH6kJD1TSK1aFcwgx+mdg3epi8=" crossorigin></script>
<script>window.addEventListener('DOMContentLoaded', () => hljs.initHighlighting())</script>
</head>
<body>
<main>
<article id="content">
<header>
<h1 class="title">Module <code>pyramidtriangles.grid.pyramid</code></h1>
</header>
<section id="section-intro">
<p>Pyramid represents the whole pyramid.</p>
<p>Each show is given the pyramid in its constructor. From there, the show selects
what "grid" of cells it wants to operate on. That could a panel (copied), a face (copied),
or each literal face or panel.</p>
<h1 id="to-access-a-side-of-the-pyramid-which-is-mirrored-on-the-other-side">To access a side of the pyramid, which is mirrored on the other side</h1>
<p>grid = pyramid.face</p>
<h1 id="to-access-a-single-panel-with-is-mirrored-on-every-other-panel">To access a single panel, with is mirrored on every other panel</h1>
<p>grid = pyramid.panel</p>
<h1 id="or-it-can-access-the-literal-first-face-with-no-data-mirrored">Or, it can access the literal first face, with no data mirrored</h1>
<p>first_face = pyramid.faces[0]</p>
<h1 id="then-access-the-first-actual-triangle-panel-on-the-first-face-again-with-no-data-mirrored">Then access the first actual triangle panel on the first face, again with no data mirrored</h1>
<p>first_panel = first_face.panels[0]</p>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">&#34;&#34;&#34;
Pyramid represents the whole pyramid.

Each show is given the pyramid in its constructor. From there, the show selects
what &#34;grid&#34; of cells it wants to operate on. That could a panel (copied), a face (copied),
or each literal face or panel.

# To access a side of the pyramid, which is mirrored on the other side
grid = pyramid.face

# To access a single panel, with is mirrored on every other panel
grid = pyramid.panel

# Or, it can access the literal first face, with no data mirrored
first_face = pyramid.faces[0]
# Then access the first actual triangle panel on the first face, again with no data mirrored
first_panel = first_face.panels[0]
&#34;&#34;&#34;
from __future__ import annotations
from collections.abc import Iterable, Iterator
from typing import Optional

from ..color import HSV
from ..model import Model, DisplayColor
from .cell import Cell, Direction
from .geom import Address, Coordinate, Geometry, Universe
from .grid import Grid, Pixel, Selector
from .face import Face, FULL_FACE_SPEC


class Pyramid:
    &#34;&#34;&#34;
    Pyramid represents the whole pyramid.

    Each show is given the pyramid in its constructor.
    The show can access whichever view of the pyramid they like:
    - an individual panel, where the image will be replicated on every panel of every face
    - a face (side) of the pyramid, where the image will be mirrored on the other side

    # To access a side of the pyramid, which is copied to the other side
    grid = pyramid.face

    # To access a single panel, with the data copied to every other panel
    grid = pyramid.panel

    # To access the first face, with no data copied
    first_face = pyramid.faces[0]
    # Then access the first actual triangle panel on the first face
    first_panel = first_face.panels[0]
    &#34;&#34;&#34;

    faces: list[Face]

    # synthesized grids
    panel: Grid
    face: Grid

    @classmethod
    def build_single(cls,
                     model: Model,
                     start: Address = Address(Universe(1, 1), 4)) -&gt; Pyramid:
        &#34;&#34;&#34;Builds Pyramid with a single, repeated panel.&#34;&#34;&#34;
        face = Face.build(model, [[0]], start)
        return cls([face])

    @classmethod
    def build(cls,
              model: Model,
              start: Address = Address(Universe(1, 1), 4)) -&gt; Pyramid:
        &#34;&#34;&#34;Builds Pyramid for the art car.&#34;&#34;&#34;
        left_face = Face.build(model, FULL_FACE_SPEC, start)
        right_face = Face.build(model, FULL_FACE_SPEC, left_face.next_address)
        back_face = Face.build(model, [[0]], right_face.next_address)

        return cls([left_face, right_face, back_face])

    def __init__(self, faces: Iterable[Face]):
        # faces: [left, right, back] on art car

        self.faces = list(faces)

        # Special case for using one mirrored panel, not on the art car.
        if len(self.faces) == 1:
            self.panel = PanelReplicator(self.faces)
            self.face = self.faces[0]
            return

        if len(self.faces) != 3:
            raise ValueError(&#34;don&#39;t you know a Pyramid has three sides&#34;)

        self.panel = PanelReplicator(self.faces)
        self.face = FaceMirror(self.faces[:2])

    @property
    def _model(self) -&gt; Model:
        # there should only really be one model
        return self.faces[0].model

    @property
    def cells(self) -&gt; list[Cell]:
        cells = []
        for face in self.faces:
            cells.extend(face.cells)
        return cells

    @property
    def brightness(self) -&gt; float:
        &#34;&#34;&#34;
        Getter for current brightness scale [0,1].
        &#34;&#34;&#34;
        return self._model.brightness

    @brightness.setter
    def brightness(self, value: float):
        &#34;&#34;&#34;
        Setter for current brightness scale [0,1].
        &#34;&#34;&#34;
        if value &lt; 0.0:
            self._model.brightness = 0.0
        elif value &gt; 1.0:
            self._model.brightness = 1.0
        else:
            self._model.brightness = value

    def go(self):
        self._model.go()

    def clear(self, color: DisplayColor = HSV(0, 0, 0)):
        for face in self.faces:
            face.clear(color)


class PanelReplicator(Grid):
    &#34;&#34;&#34;
    Exposes a single panel as a grid, and replicates pixels on every panel of every face.

    This is used in Pyramid and isn&#39;t expected to be used elsewhere.
    &#34;&#34;&#34;

    faces: list[Face]

    _exemplar_face: Face
    _exemplar_panel_geom: Geometry

    def __init__(self, faces: Iterable[Face]):
        self.faces = list(faces)
        if not self.faces:
            raise ValueError(&#39;no faces provided to PanelReplicator&#39;)

        # TODO(lyra): assumes each face has a panel at &lt;0, 0&gt;
        self._exemplar_face = self.faces[0]
        self._exemplar_panel_geom = min(self._exemplar_face.panels,
                                        key=lambda panel: panel.geom.origin).geom
        if self._exemplar_panel_geom.origin != Coordinate(0, 0):
            raise ValueError(
                &#39;Each face must have a panel whose origin is &lt;0, 0&gt;&#39;)

        self.model = self._exemplar_face.model
        self.geom = Geometry(origin=Coordinate(0, 0),
                             rows=self._exemplar_panel_geom.rows)

    @property
    def cells(self) -&gt; list[Cell]:
        return [cell
                for cell in self._exemplar_face.cells
                if cell.coordinate in self._exemplar_panel_geom]

    def _cell(self, coordinate: Coordinate) -&gt; Optional[Cell]:
        if coordinate not in self.geom:
            return None

        return self._exemplar_face._cell(coordinate)

    def pixels(self, sel: Selector, direction: Direction = Direction.NATURAL) -&gt; Iterator[Pixel]:
        for cell in self.select(sel):
            coord = cell.coordinate

            for face in self.faces:
                for panel in face.panels:
                    yield from face.pixels(coord.adjust(*panel.geom.origin), direction)


class FaceReplicator(Grid):
    &#34;&#34;&#34;
    Treats any number of identically-sized faces as one.

    This is used in Pyramid and isn&#39;t expected to be used elsewhere.
    &#34;&#34;&#34;

    primary: Face
    replicas: list[Face]

    def __init__(self, faces: Iterable[Face]):
        face_list = list(faces)

        if len({face.geom.rows for face in face_list}) != 1:
            raise ValueError(
                &#39;each replicated Face must have the same geometry&#39;)

        self.primary = face_list[0]
        self.replicas = face_list[1:]

    @property
    def geom(self):
        return self.primary.geom

    @property
    def model(self) -&gt; Model:
        return self.primary.model

    @property
    def cells(self) -&gt; list[Cell]:
        return self.primary.cells

    def _cell(self, coordinate: Coordinate) -&gt; Optional[Cell]:
        return self.primary._cell(coordinate)


class FaceMirror(FaceReplicator):
    &#34;&#34;&#34;
    Flips the x-coordinate and pixel enumeration direction on all mirror faces.

    This is used in Pyramid and isn&#39;t expected to be used elsewhere.
    &#34;&#34;&#34;

    def pixels(self, sel: Selector, direction: Direction = Direction.NATURAL) -&gt; Iterator[Pixel]:
        for cell in self.primary.select(sel):
            yield from self.primary.pixels(cell, direction)

            mirror_coord = Coordinate(self.geom.width - cell.x - 1, cell.y)
            for face in self.replicas:
                yield from face.pixels(mirror_coord, direction.invert())</code></pre>
</details>
</section>
<section>
</section>
<section>
</section>
<section>
</section>
<section>
<h2 class="section-title" id="header-classes">Classes</h2>
<dl>
<dt id="pyramidtriangles.grid.pyramid.FaceMirror"><code class="flex name class">
<span>class <span class="ident">FaceMirror</span></span>
<span>(</span><span>faces: Iterable[Face])</span>
</code></dt>
<dd>
<div class="desc"><p>Flips the x-coordinate and pixel enumeration direction on all mirror faces.</p>
<p>This is used in Pyramid and isn't expected to be used elsewhere.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class FaceMirror(FaceReplicator):
    &#34;&#34;&#34;
    Flips the x-coordinate and pixel enumeration direction on all mirror faces.

    This is used in Pyramid and isn&#39;t expected to be used elsewhere.
    &#34;&#34;&#34;

    def pixels(self, sel: Selector, direction: Direction = Direction.NATURAL) -&gt; Iterator[Pixel]:
        for cell in self.primary.select(sel):
            yield from self.primary.pixels(cell, direction)

            mirror_coord = Coordinate(self.geom.width - cell.x - 1, cell.y)
            for face in self.replicas:
                yield from face.pixels(mirror_coord, direction.invert())</code></pre>
</details>
<h3>Ancestors</h3>
<ul class="hlist">
<li><a title="pyramidtriangles.grid.pyramid.FaceReplicator" href="#pyramidtriangles.grid.pyramid.FaceReplicator">FaceReplicator</a></li>
<li><a title="pyramidtriangles.grid.grid.Grid" href="grid.html#pyramidtriangles.grid.grid.Grid">Grid</a></li>
<li>collections.abc.Mapping</li>
<li>collections.abc.Collection</li>
<li>collections.abc.Sized</li>
<li>collections.abc.Iterable</li>
<li>collections.abc.Container</li>
</ul>
<h3>Class variables</h3>
<dl>
<dt id="pyramidtriangles.grid.pyramid.FaceMirror.primary"><code class="name">var <span class="ident">primary</span> : <a title="pyramidtriangles.grid.face.Face" href="face.html#pyramidtriangles.grid.face.Face">Face</a></code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt id="pyramidtriangles.grid.pyramid.FaceMirror.replicas"><code class="name">var <span class="ident">replicas</span> : list</code></dt>
<dd>
<div class="desc"></div>
</dd>
</dl>
<h3>Inherited members</h3>
<ul class="hlist">
<li><code><b><a title="pyramidtriangles.grid.pyramid.FaceReplicator" href="#pyramidtriangles.grid.pyramid.FaceReplicator">FaceReplicator</a></b></code>:
<ul class="hlist">
<li><code><a title="pyramidtriangles.grid.pyramid.FaceReplicator.go" href="grid.html#pyramidtriangles.grid.grid.Grid.go">go</a></code></li>
<li><code><a title="pyramidtriangles.grid.pyramid.FaceReplicator.pixels" href="grid.html#pyramidtriangles.grid.grid.Grid.pixels">pixels</a></code></li>
<li><code><a title="pyramidtriangles.grid.pyramid.FaceReplicator.select" href="grid.html#pyramidtriangles.grid.grid.Grid.select">select</a></code></li>
</ul>
</li>
</ul>
</dd>
<dt id="pyramidtriangles.grid.pyramid.FaceReplicator"><code class="flex name class">
<span>class <span class="ident">FaceReplicator</span></span>
<span>(</span><span>faces: Iterable[Face])</span>
</code></dt>
<dd>
<div class="desc"><p>Treats any number of identically-sized faces as one.</p>
<p>This is used in Pyramid and isn't expected to be used elsewhere.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class FaceReplicator(Grid):
    &#34;&#34;&#34;
    Treats any number of identically-sized faces as one.

    This is used in Pyramid and isn&#39;t expected to be used elsewhere.
    &#34;&#34;&#34;

    primary: Face
    replicas: list[Face]

    def __init__(self, faces: Iterable[Face]):
        face_list = list(faces)

        if len({face.geom.rows for face in face_list}) != 1:
            raise ValueError(
                &#39;each replicated Face must have the same geometry&#39;)

        self.primary = face_list[0]
        self.replicas = face_list[1:]

    @property
    def geom(self):
        return self.primary.geom

    @property
    def model(self) -&gt; Model:
        return self.primary.model

    @property
    def cells(self) -&gt; list[Cell]:
        return self.primary.cells

    def _cell(self, coordinate: Coordinate) -&gt; Optional[Cell]:
        return self.primary._cell(coordinate)</code></pre>
</details>
<h3>Ancestors</h3>
<ul class="hlist">
<li><a title="pyramidtriangles.grid.grid.Grid" href="grid.html#pyramidtriangles.grid.grid.Grid">Grid</a></li>
<li>collections.abc.Mapping</li>
<li>collections.abc.Collection</li>
<li>collections.abc.Sized</li>
<li>collections.abc.Iterable</li>
<li>collections.abc.Container</li>
</ul>
<h3>Subclasses</h3>
<ul class="hlist">
<li><a title="pyramidtriangles.grid.pyramid.FaceMirror" href="#pyramidtriangles.grid.pyramid.FaceMirror">FaceMirror</a></li>
</ul>
<h3>Class variables</h3>
<dl>
<dt id="pyramidtriangles.grid.pyramid.FaceReplicator.primary"><code class="name">var <span class="ident">primary</span> : <a title="pyramidtriangles.grid.face.Face" href="face.html#pyramidtriangles.grid.face.Face">Face</a></code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt id="pyramidtriangles.grid.pyramid.FaceReplicator.replicas"><code class="name">var <span class="ident">replicas</span> : list</code></dt>
<dd>
<div class="desc"></div>
</dd>
</dl>
<h3>Instance variables</h3>
<dl>
<dt id="pyramidtriangles.grid.pyramid.FaceReplicator.cells"><code class="name">var <span class="ident">cells</span> : list</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">@property
def cells(self) -&gt; list[Cell]:
    return self.primary.cells</code></pre>
</details>
</dd>
<dt id="pyramidtriangles.grid.pyramid.FaceReplicator.geom"><code class="name">var <span class="ident">geom</span> : <a title="pyramidtriangles.grid.geom.Geometry" href="geom.html#pyramidtriangles.grid.geom.Geometry">Geometry</a></code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">@property
def geom(self):
    return self.primary.geom</code></pre>
</details>
</dd>
<dt id="pyramidtriangles.grid.pyramid.FaceReplicator.model"><code class="name">var <span class="ident">model</span> : <a title="pyramidtriangles.model.Model" href="../model/index.html#pyramidtriangles.model.Model">Model</a></code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">@property
def model(self) -&gt; Model:
    return self.primary.model</code></pre>
</details>
</dd>
</dl>
<h3>Inherited members</h3>
<ul class="hlist">
<li><code><b><a title="pyramidtriangles.grid.grid.Grid" href="grid.html#pyramidtriangles.grid.grid.Grid">Grid</a></b></code>:
<ul class="hlist">
<li><code><a title="pyramidtriangles.grid.grid.Grid.go" href="grid.html#pyramidtriangles.grid.grid.Grid.go">go</a></code></li>
<li><code><a title="pyramidtriangles.grid.grid.Grid.pixels" href="grid.html#pyramidtriangles.grid.grid.Grid.pixels">pixels</a></code></li>
<li><code><a title="pyramidtriangles.grid.grid.Grid.select" href="grid.html#pyramidtriangles.grid.grid.Grid.select">select</a></code></li>
</ul>
</li>
</ul>
</dd>
<dt id="pyramidtriangles.grid.pyramid.PanelReplicator"><code class="flex name class">
<span>class <span class="ident">PanelReplicator</span></span>
<span>(</span><span>faces: Iterable[Face])</span>
</code></dt>
<dd>
<div class="desc"><p>Exposes a single panel as a grid, and replicates pixels on every panel of every face.</p>
<p>This is used in Pyramid and isn't expected to be used elsewhere.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class PanelReplicator(Grid):
    &#34;&#34;&#34;
    Exposes a single panel as a grid, and replicates pixels on every panel of every face.

    This is used in Pyramid and isn&#39;t expected to be used elsewhere.
    &#34;&#34;&#34;

    faces: list[Face]

    _exemplar_face: Face
    _exemplar_panel_geom: Geometry

    def __init__(self, faces: Iterable[Face]):
        self.faces = list(faces)
        if not self.faces:
            raise ValueError(&#39;no faces provided to PanelReplicator&#39;)

        # TODO(lyra): assumes each face has a panel at &lt;0, 0&gt;
        self._exemplar_face = self.faces[0]
        self._exemplar_panel_geom = min(self._exemplar_face.panels,
                                        key=lambda panel: panel.geom.origin).geom
        if self._exemplar_panel_geom.origin != Coordinate(0, 0):
            raise ValueError(
                &#39;Each face must have a panel whose origin is &lt;0, 0&gt;&#39;)

        self.model = self._exemplar_face.model
        self.geom = Geometry(origin=Coordinate(0, 0),
                             rows=self._exemplar_panel_geom.rows)

    @property
    def cells(self) -&gt; list[Cell]:
        return [cell
                for cell in self._exemplar_face.cells
                if cell.coordinate in self._exemplar_panel_geom]

    def _cell(self, coordinate: Coordinate) -&gt; Optional[Cell]:
        if coordinate not in self.geom:
            return None

        return self._exemplar_face._cell(coordinate)

    def pixels(self, sel: Selector, direction: Direction = Direction.NATURAL) -&gt; Iterator[Pixel]:
        for cell in self.select(sel):
            coord = cell.coordinate

            for face in self.faces:
                for panel in face.panels:
                    yield from face.pixels(coord.adjust(*panel.geom.origin), direction)</code></pre>
</details>
<h3>Ancestors</h3>
<ul class="hlist">
<li><a title="pyramidtriangles.grid.grid.Grid" href="grid.html#pyramidtriangles.grid.grid.Grid">Grid</a></li>
<li>collections.abc.Mapping</li>
<li>collections.abc.Collection</li>
<li>collections.abc.Sized</li>
<li>collections.abc.Iterable</li>
<li>collections.abc.Container</li>
</ul>
<h3>Class variables</h3>
<dl>
<dt id="pyramidtriangles.grid.pyramid.PanelReplicator.faces"><code class="name">var <span class="ident">faces</span> : list</code></dt>
<dd>
<div class="desc"></div>
</dd>
</dl>
<h3>Instance variables</h3>
<dl>
<dt id="pyramidtriangles.grid.pyramid.PanelReplicator.cells"><code class="name">var <span class="ident">cells</span> : list</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">@property
def cells(self) -&gt; list[Cell]:
    return [cell
            for cell in self._exemplar_face.cells
            if cell.coordinate in self._exemplar_panel_geom]</code></pre>
</details>
</dd>
</dl>
<h3>Inherited members</h3>
<ul class="hlist">
<li><code><b><a title="pyramidtriangles.grid.grid.Grid" href="grid.html#pyramidtriangles.grid.grid.Grid">Grid</a></b></code>:
<ul class="hlist">
<li><code><a title="pyramidtriangles.grid.grid.Grid.go" href="grid.html#pyramidtriangles.grid.grid.Grid.go">go</a></code></li>
<li><code><a title="pyramidtriangles.grid.grid.Grid.pixels" href="grid.html#pyramidtriangles.grid.grid.Grid.pixels">pixels</a></code></li>
<li><code><a title="pyramidtriangles.grid.grid.Grid.select" href="grid.html#pyramidtriangles.grid.grid.Grid.select">select</a></code></li>
</ul>
</li>
</ul>
</dd>
<dt id="pyramidtriangles.grid.pyramid.Pyramid"><code class="flex name class">
<span>class <span class="ident">Pyramid</span></span>
<span>(</span><span>faces: Iterable[Face])</span>
</code></dt>
<dd>
<div class="desc"><p>Pyramid represents the whole pyramid.</p>
<p>Each show is given the pyramid in its constructor.
The show can access whichever view of the pyramid they like:
- an individual panel, where the image will be replicated on every panel of every face
- a face (side) of the pyramid, where the image will be mirrored on the other side</p>
<h1 id="to-access-a-side-of-the-pyramid-which-is-copied-to-the-other-side">To access a side of the pyramid, which is copied to the other side</h1>
<p>grid = pyramid.face</p>
<h1 id="to-access-a-single-panel-with-the-data-copied-to-every-other-panel">To access a single panel, with the data copied to every other panel</h1>
<p>grid = pyramid.panel</p>
<h1 id="to-access-the-first-face-with-no-data-copied">To access the first face, with no data copied</h1>
<p>first_face = pyramid.faces[0]</p>
<h1 id="then-access-the-first-actual-triangle-panel-on-the-first-face">Then access the first actual triangle panel on the first face</h1>
<p>first_panel = first_face.panels[0]</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class Pyramid:
    &#34;&#34;&#34;
    Pyramid represents the whole pyramid.

    Each show is given the pyramid in its constructor.
    The show can access whichever view of the pyramid they like:
    - an individual panel, where the image will be replicated on every panel of every face
    - a face (side) of the pyramid, where the image will be mirrored on the other side

    # To access a side of the pyramid, which is copied to the other side
    grid = pyramid.face

    # To access a single panel, with the data copied to every other panel
    grid = pyramid.panel

    # To access the first face, with no data copied
    first_face = pyramid.faces[0]
    # Then access the first actual triangle panel on the first face
    first_panel = first_face.panels[0]
    &#34;&#34;&#34;

    faces: list[Face]

    # synthesized grids
    panel: Grid
    face: Grid

    @classmethod
    def build_single(cls,
                     model: Model,
                     start: Address = Address(Universe(1, 1), 4)) -&gt; Pyramid:
        &#34;&#34;&#34;Builds Pyramid with a single, repeated panel.&#34;&#34;&#34;
        face = Face.build(model, [[0]], start)
        return cls([face])

    @classmethod
    def build(cls,
              model: Model,
              start: Address = Address(Universe(1, 1), 4)) -&gt; Pyramid:
        &#34;&#34;&#34;Builds Pyramid for the art car.&#34;&#34;&#34;
        left_face = Face.build(model, FULL_FACE_SPEC, start)
        right_face = Face.build(model, FULL_FACE_SPEC, left_face.next_address)
        back_face = Face.build(model, [[0]], right_face.next_address)

        return cls([left_face, right_face, back_face])

    def __init__(self, faces: Iterable[Face]):
        # faces: [left, right, back] on art car

        self.faces = list(faces)

        # Special case for using one mirrored panel, not on the art car.
        if len(self.faces) == 1:
            self.panel = PanelReplicator(self.faces)
            self.face = self.faces[0]
            return

        if len(self.faces) != 3:
            raise ValueError(&#34;don&#39;t you know a Pyramid has three sides&#34;)

        self.panel = PanelReplicator(self.faces)
        self.face = FaceMirror(self.faces[:2])

    @property
    def _model(self) -&gt; Model:
        # there should only really be one model
        return self.faces[0].model

    @property
    def cells(self) -&gt; list[Cell]:
        cells = []
        for face in self.faces:
            cells.extend(face.cells)
        return cells

    @property
    def brightness(self) -&gt; float:
        &#34;&#34;&#34;
        Getter for current brightness scale [0,1].
        &#34;&#34;&#34;
        return self._model.brightness

    @brightness.setter
    def brightness(self, value: float):
        &#34;&#34;&#34;
        Setter for current brightness scale [0,1].
        &#34;&#34;&#34;
        if value &lt; 0.0:
            self._model.brightness = 0.0
        elif value &gt; 1.0:
            self._model.brightness = 1.0
        else:
            self._model.brightness = value

    def go(self):
        self._model.go()

    def clear(self, color: DisplayColor = HSV(0, 0, 0)):
        for face in self.faces:
            face.clear(color)</code></pre>
</details>
<h3>Class variables</h3>
<dl>
<dt id="pyramidtriangles.grid.pyramid.Pyramid.face"><code class="name">var <span class="ident">face</span> : <a title="pyramidtriangles.grid.grid.Grid" href="grid.html#pyramidtriangles.grid.grid.Grid">Grid</a></code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt id="pyramidtriangles.grid.pyramid.Pyramid.faces"><code class="name">var <span class="ident">faces</span> : list</code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt id="pyramidtriangles.grid.pyramid.Pyramid.panel"><code class="name">var <span class="ident">panel</span> : <a title="pyramidtriangles.grid.grid.Grid" href="grid.html#pyramidtriangles.grid.grid.Grid">Grid</a></code></dt>
<dd>
<div class="desc"></div>
</dd>
</dl>
<h3>Static methods</h3>
<dl>
<dt id="pyramidtriangles.grid.pyramid.Pyramid.build"><code class="name flex">
<span>def <span class="ident">build</span></span>(<span>model: Model, start: Address = Address(universe=Universe(base=1, id=1), offset=4)) ‑> <a title="pyramidtriangles.grid.pyramid.Pyramid" href="#pyramidtriangles.grid.pyramid.Pyramid">Pyramid</a></span>
</code></dt>
<dd>
<div class="desc"><p>Builds Pyramid for the art car.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">@classmethod
def build(cls,
          model: Model,
          start: Address = Address(Universe(1, 1), 4)) -&gt; Pyramid:
    &#34;&#34;&#34;Builds Pyramid for the art car.&#34;&#34;&#34;
    left_face = Face.build(model, FULL_FACE_SPEC, start)
    right_face = Face.build(model, FULL_FACE_SPEC, left_face.next_address)
    back_face = Face.build(model, [[0]], right_face.next_address)

    return cls([left_face, right_face, back_face])</code></pre>
</details>
</dd>
<dt id="pyramidtriangles.grid.pyramid.Pyramid.build_single"><code class="name flex">
<span>def <span class="ident">build_single</span></span>(<span>model: Model, start: Address = Address(universe=Universe(base=1, id=1), offset=4)) ‑> <a title="pyramidtriangles.grid.pyramid.Pyramid" href="#pyramidtriangles.grid.pyramid.Pyramid">Pyramid</a></span>
</code></dt>
<dd>
<div class="desc"><p>Builds Pyramid with a single, repeated panel.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">@classmethod
def build_single(cls,
                 model: Model,
                 start: Address = Address(Universe(1, 1), 4)) -&gt; Pyramid:
    &#34;&#34;&#34;Builds Pyramid with a single, repeated panel.&#34;&#34;&#34;
    face = Face.build(model, [[0]], start)
    return cls([face])</code></pre>
</details>
</dd>
</dl>
<h3>Instance variables</h3>
<dl>
<dt id="pyramidtriangles.grid.pyramid.Pyramid.brightness"><code class="name">var <span class="ident">brightness</span> : float</code></dt>
<dd>
<div class="desc"><p>Getter for current brightness scale [0,1].</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">@property
def brightness(self) -&gt; float:
    &#34;&#34;&#34;
    Getter for current brightness scale [0,1].
    &#34;&#34;&#34;
    return self._model.brightness</code></pre>
</details>
</dd>
<dt id="pyramidtriangles.grid.pyramid.Pyramid.cells"><code class="name">var <span class="ident">cells</span> : list</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">@property
def cells(self) -&gt; list[Cell]:
    cells = []
    for face in self.faces:
        cells.extend(face.cells)
    return cells</code></pre>
</details>
</dd>
</dl>
<h3>Methods</h3>
<dl>
<dt id="pyramidtriangles.grid.pyramid.Pyramid.clear"><code class="name flex">
<span>def <span class="ident">clear</span></span>(<span>self, color: DisplayColor = rgb=(0, 0, 0) hsv=(0.0, 0, 0))</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def clear(self, color: DisplayColor = HSV(0, 0, 0)):
    for face in self.faces:
        face.clear(color)</code></pre>
</details>
</dd>
<dt id="pyramidtriangles.grid.pyramid.Pyramid.go"><code class="name flex">
<span>def <span class="ident">go</span></span>(<span>self)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def go(self):
    self._model.go()</code></pre>
</details>
</dd>
</dl>
</dd>
</dl>
</section>
</article>
<nav id="sidebar">
<h1>Index</h1>
<div class="toc">
<ul>
<li><a href="#to-access-a-side-of-the-pyramid-which-is-mirrored-on-the-other-side">To access a side of the pyramid, which is mirrored on the other side</a></li>
<li><a href="#to-access-a-single-panel-with-is-mirrored-on-every-other-panel">To access a single panel, with is mirrored on every other panel</a></li>
<li><a href="#or-it-can-access-the-literal-first-face-with-no-data-mirrored">Or, it can access the literal first face, with no data mirrored</a></li>
<li><a href="#then-access-the-first-actual-triangle-panel-on-the-first-face-again-with-no-data-mirrored">Then access the first actual triangle panel on the first face, again with no data mirrored</a></li>
</ul>
</div>
<ul id="index">
<li><h3>Super-module</h3>
<ul>
<li><code><a title="pyramidtriangles.grid" href="index.html">pyramidtriangles.grid</a></code></li>
</ul>
</li>
<li><h3><a href="#header-classes">Classes</a></h3>
<ul>
<li>
<h4><code><a title="pyramidtriangles.grid.pyramid.FaceMirror" href="#pyramidtriangles.grid.pyramid.FaceMirror">FaceMirror</a></code></h4>
<ul class="">
<li><code><a title="pyramidtriangles.grid.pyramid.FaceMirror.primary" href="#pyramidtriangles.grid.pyramid.FaceMirror.primary">primary</a></code></li>
<li><code><a title="pyramidtriangles.grid.pyramid.FaceMirror.replicas" href="#pyramidtriangles.grid.pyramid.FaceMirror.replicas">replicas</a></code></li>
</ul>
</li>
<li>
<h4><code><a title="pyramidtriangles.grid.pyramid.FaceReplicator" href="#pyramidtriangles.grid.pyramid.FaceReplicator">FaceReplicator</a></code></h4>
<ul class="">
<li><code><a title="pyramidtriangles.grid.pyramid.FaceReplicator.cells" href="#pyramidtriangles.grid.pyramid.FaceReplicator.cells">cells</a></code></li>
<li><code><a title="pyramidtriangles.grid.pyramid.FaceReplicator.geom" href="#pyramidtriangles.grid.pyramid.FaceReplicator.geom">geom</a></code></li>
<li><code><a title="pyramidtriangles.grid.pyramid.FaceReplicator.model" href="#pyramidtriangles.grid.pyramid.FaceReplicator.model">model</a></code></li>
<li><code><a title="pyramidtriangles.grid.pyramid.FaceReplicator.primary" href="#pyramidtriangles.grid.pyramid.FaceReplicator.primary">primary</a></code></li>
<li><code><a title="pyramidtriangles.grid.pyramid.FaceReplicator.replicas" href="#pyramidtriangles.grid.pyramid.FaceReplicator.replicas">replicas</a></code></li>
</ul>
</li>
<li>
<h4><code><a title="pyramidtriangles.grid.pyramid.PanelReplicator" href="#pyramidtriangles.grid.pyramid.PanelReplicator">PanelReplicator</a></code></h4>
<ul class="">
<li><code><a title="pyramidtriangles.grid.pyramid.PanelReplicator.cells" href="#pyramidtriangles.grid.pyramid.PanelReplicator.cells">cells</a></code></li>
<li><code><a title="pyramidtriangles.grid.pyramid.PanelReplicator.faces" href="#pyramidtriangles.grid.pyramid.PanelReplicator.faces">faces</a></code></li>
</ul>
</li>
<li>
<h4><code><a title="pyramidtriangles.grid.pyramid.Pyramid" href="#pyramidtriangles.grid.pyramid.Pyramid">Pyramid</a></code></h4>
<ul class="two-column">
<li><code><a title="pyramidtriangles.grid.pyramid.Pyramid.brightness" href="#pyramidtriangles.grid.pyramid.Pyramid.brightness">brightness</a></code></li>
<li><code><a title="pyramidtriangles.grid.pyramid.Pyramid.build" href="#pyramidtriangles.grid.pyramid.Pyramid.build">build</a></code></li>
<li><code><a title="pyramidtriangles.grid.pyramid.Pyramid.build_single" href="#pyramidtriangles.grid.pyramid.Pyramid.build_single">build_single</a></code></li>
<li><code><a title="pyramidtriangles.grid.pyramid.Pyramid.cells" href="#pyramidtriangles.grid.pyramid.Pyramid.cells">cells</a></code></li>
<li><code><a title="pyramidtriangles.grid.pyramid.Pyramid.clear" href="#pyramidtriangles.grid.pyramid.Pyramid.clear">clear</a></code></li>
<li><code><a title="pyramidtriangles.grid.pyramid.Pyramid.face" href="#pyramidtriangles.grid.pyramid.Pyramid.face">face</a></code></li>
<li><code><a title="pyramidtriangles.grid.pyramid.Pyramid.faces" href="#pyramidtriangles.grid.pyramid.Pyramid.faces">faces</a></code></li>
<li><code><a title="pyramidtriangles.grid.pyramid.Pyramid.go" href="#pyramidtriangles.grid.pyramid.Pyramid.go">go</a></code></li>
<li><code><a title="pyramidtriangles.grid.pyramid.Pyramid.panel" href="#pyramidtriangles.grid.pyramid.Pyramid.panel">panel</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</nav>
</main>
<footer id="footer">
<p>Generated by <a href="https://pdoc3.github.io/pdoc"><cite>pdoc</cite> 0.9.2</a>.</p>
</footer>
</body>
</html>